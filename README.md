# 智能辅助学习系统

一个功能完整的智能辅助学习系统，专为初中生设计，支持数学题、古诗默写和英语默写，可以在线练习或导出Word文档。系统采用前后端分离架构，界面美观，操作简单，集成了AI智能问答和错题讲解功能，是学生日常练习和老师出题的理想工具。

## 目录

- [功能特性](#功能特性)
- [系统要求](#系统要求)
- [项目结构](#项目结构)
- [安装和运行](#安装和运行)
- [数据导入](#数据导入)
- [使用说明](#使用说明)
- [练习报告功能](#练习报告功能)
- [技术栈](#技术栈)
- [常见问题](#常见问题)
- [更新日志](#更新日志)
- [作者信息](#作者信息)

## 功能特性

### 数学题

**基础功能**
- 支持20以内、100以内的加减法运算
- 支持加法、减法、混合运算三种题型
- 可自定义题目数量（1-100题）
- 可自定义最大数字范围
- 动态生成题目，确保每次练习都不重复

**显示优化**
- 支持分数显示，使用HTML格式（`<sup>`和`<sub>`标签）
- 分数格式：分子/分母，清晰易读
- 支持整数和分数混合运算

**练习模式**
- 在线练习：实时输入答案
- 自动检查：点击按钮立即查看结果
- 答案提示：错误时显示正确答案

### 古诗默写

**教材支持**
- 支持八年级上册不编版教材古诗
- 可扩展支持其他年级和版本
- 包含古诗名称、作者、朝代、诗句等信息

**出题方式**
- 可勾选多首古诗生成题目
- 随机生成上下句默写
- 顺序完全打乱，避免记忆顺序
- 显示古诗名称和作者，帮助回忆

**练习功能**
- 支持在线练习
- 支持Word导出，便于打印
- 自动检查答案，区分正确/错误

### 英语默写

**教材支持**
- 支持八年级上册不编版教材单词
- 按单元组织单词
- 可扩展支持其他年级和版本

**出题方式**
- 按单元选择单词
- 支持中译英和英译汉两种方向
- 随机打乱顺序
- 可自定义题目数量

**练习功能**
- 在线练习，实时检查
- Word导出，支持打印
- 答案提示，错误时显示正确答案

### AI智能问答

**AI对话功能**
- 集成Ollama AI模型（Qwen2.5 0.5B）
- 支持自然语言问答
- 可解答学习相关的问题
- 实时对话，交互流畅

**模型选择**
- 支持选择不同的AI模型
- 可根据需求切换模型
- 轻量级模型，响应快速

**使用场景**
- 学习问题解答
- 知识点讲解
- 学习方法指导
- 作业辅导

### AI错题讲解

**智能错题分析**
- 每道错题右侧独立"AI讲解"按钮
- 只在答错时显示，答对时隐藏
- 点击即可获取详细的题目讲解

**流式输出**
- AI讲解内容实时流式显示
- 逐字输出，体验流畅
- 支持长时间讲解内容的显示

**讲解内容**
- 解题思路：详细说明解题步骤
- 知识点分析：涉及的知识点讲解
- 错误原因：指出学生答案的错误之处
- 正确答案推导：展示正确答案的得出过程

**适用范围**
- 数学题：详细讲解计算步骤和思路
- 古诗默写：解释诗句含义和背景
- 英语默写：讲解单词用法和语法

**技术实现**
- 基于Ollama AI模型
- 使用流式API提升响应速度
- 前端实时接收和显示内容
- 支持多题目并发讲解

### 通用功能

**在线练习**
- 实时检查答案
- 显示正确率统计
- 错误题目显示正确答案
- 支持重置重新练习
- 错题AI讲解功能

**练习报告**
- 下载Word格式的详细练习报告
- 包含所有题目和答案
- 显示用户答案和正确答案对比
- 标记正确/错误（绿色/红色）
- 统计正确率
- 文件名包含时间戳，便于管理

**Word导出**
- 支持导出为Word文档
- 字体：Times New Roman（中文使用宋体）
- 字号：4号字（14pt）
- 行间距：1.5倍
- 布局：五栏布局
- 便于打印和分发

**界面设计**
- 简洁美观的前端界面
- 响应式设计，支持移动端
- 标签页切换，操作流畅
- 颜色搭配舒适，保护视力
- 去除花哨效果，专注学习

## 系统要求

### 硬件要求
- CPU：双核及以上
- 内存：2GB及以上
- 硬盘：100MB可用空间

### 软件要求
- 操作系统：Windows 7+、macOS 10.12+、Linux
- Python：3.7及以上版本
- 浏览器：Chrome、Firefox、Safari、Edge（推荐使用最新版本）

### 网络要求
- 本地运行，无需网络连接
- 如需使用CDN资源，需要网络连接

## 项目结构

```
app/
├── app.py                    # Flask后端服务器主文件
├── requirements.txt          # Python依赖包列表
├── start.sh                 # Linux/macOS启动脚本
├── start.bat                # Windows启动脚本
├── README.md               # 项目说明文档
├── wd.md                   # 青少年科技创新成果竞赛文档
├── data/                    # 数据目录
│   ├── poetry.json         # 古诗数据文件
│   ├── english.json        # 英语单词数据文件
│   └── math_config.json    # 数学题配置文件
├── templates/               # HTML模板目录
│   └── index.html          # 主页面模板
└── static/                  # 静态资源目录
    ├── css/
    │   └── style.css       # 样式文件
    └── js/
        └── app.js          # 前端JavaScript文件
```

### 文件说明

**后端文件**
- `app.py`：Flask应用主文件，包含所有API接口和业务逻辑
- `requirements.txt`：Python依赖包，包括Flask、python-docx等

**数据文件**
- `data/poetry.json`：存储古诗数据，包括名称、作者、朝代、诗句
- `data/english.json`：存储英语单词数据，按单元组织
- `data/math_config.json`：数学题配置，定义年级、类别、题型

**前端文件**
- `templates/index.html`：主页面HTML模板
- `static/css/style.css`：页面样式，包括响应式设计
- `static/js/app.js`：前端JavaScript，处理用户交互和API调用

**启动脚本**
- `start.sh`：Linux/macOS启动脚本
- `start.bat`：Windows启动脚本

## 安装和运行

### 1. 克隆或下载项目

```bash
# 如果使用Git
git clone <repository-url>
cd app

# 或直接下载并解压
```

### 2. 安装Python

确保已安装Python 3.7及以上版本：

```bash
# 检查Python版本
python3 --version

# 如果未安装，请访问 https://www.python.org/downloads/
```

### 3. 安装依赖

```bash
# 使用pip3安装依赖
pip3 install -r requirements.txt

# 如果pip3不可用，尝试使用pip
pip install -r requirements.txt

# 或使用国内镜像加速
pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**依赖包说明**
- `Flask`：Python Web框架
- `python-docx`：Word文档生成库

### 4. 启动服务器

**方式一：使用Python直接启动**

```bash
python3 app.py
```

**方式二：使用启动脚本（Linux/macOS）**

```bash
chmod +x start.sh
./start.sh
```

**方式三：使用启动脚本（Windows）**

```cmd
start.bat
```

### 5. 访问应用

打开浏览器访问：http://127.0.0.1:3000

如果需要修改端口，编辑`app.py`文件最后一行：

```python
if __name__ == '__main__':
    app.run(debug=True, port=3000)  # 修改端口号
```

### 6. 停止服务器

在终端按 `Ctrl + C` 停止服务器

## 数据导入

### 古诗数据格式

在 `data/poetry.json` 中添加古诗，格式如下：

```json
[
  {
    "id": 1,
    "name": "望天门山",
    "author": "李白",
    "dynasty": "唐",
    "lines": [
      "天门中断楚江开",
      "碧水东流至此回",
      "两岸青山相对出",
      "孤帆一片日边来"
    ]
  },
  {
    "id": 2,
    "name": "饮湖上初晴后雨",
    "author": "苏轼",
    "dynasty": "宋",
    "lines": [
      "水光潋滟晴方好",
      "山色空蒙雨亦奇",
      "欲把西湖比西子",
      "淡妆浓抹总相宜"
    ]
  }
]
```

**字段说明**
- `id`：古诗唯一标识（数字）
- `name`：古诗名称
- `author`：作者姓名
- `dynasty`：朝代
- `lines`：诗句数组，每句一个元素

**注意事项**
- `id`必须唯一，不能重复
- `lines`数组长度必须为4（绝句）或8（律诗）
- 诗句内容不要包含标点符号

### 英语数据格式

在 `data/english.json` 中添加单词，格式如下：

```json
{
  "grade": "八年级上册",
  "edition": "不编版",
  "units": [
    {
      "name": "Unit 1 Where did you go on vacation?",
      "words": [
        {
          "english": "anyone",
          "chinese": "pron. 任何人"
        },
        {
          "english": "anywhere",
          "chinese": "adv. 在任何地方"
        },
        {
          "english": "wonderful",
          "chinese": "adj. 精彩的；绝妙的"
        }
      ]
    },
    {
      "name": "Unit 2 How often do you exercise?",
      "words": [
        {
          "english": "housework",
          "chinese": "n. 家务劳动"
        },
        {
          "english": "hardly",
          "chinese": "adv. 几乎不；几乎没有"
        }
      ]
    }
  ]
}
```

**字段说明**
- `grade`：年级名称
- `edition`：教材版本
- `units`：单元数组
  - `name`：单元名称
  - `words`：单词数组
    - `english`：英文单词
    - `chinese`：中文释义

**注意事项**
- 单元名称建议包含序号（Unit 1、Unit 2等）
- 中文释义可以包含词性标记（n.、v.、adj.、adv.等）
- 可以添加任意数量的单元和单词

### 数学题配置格式

在 `data/math_config.json` 中配置数学题，格式如下：

```json
{
  "grades": [
    {
      "id": 1,
      "name": "一年级",
      "categories": [
        {
          "id": 1,
          "name": "20以内加减法",
          "types": [
            {
              "id": 1,
              "name": "加法",
              "max_num": 20,
              "operation": "+"
            },
            {
              "id": 2,
              "name": "减法",
              "max_num": 20,
              "operation": "-"
            },
            {
              "id": 3,
              "name": "混合运算",
              "max_num": 20,
              "operation": "mixed"
            }
          ]
        },
        {
          "id": 2,
          "name": "100以内加减法",
          "types": [
            {
              "id": 4,
              "name": "加法",
              "max_num": 100,
              "operation": "+"
            },
            {
              "id": 5,
              "name": "减法",
              "max_num": 100,
              "operation": "-"
            },
            {
              "id": 6,
              "name": "混合运算",
              "max_num": 100,
              "operation": "mixed"
            }
          ]
        }
      ]
    }
  ]
}
```

**字段说明**
- `grades`：年级数组
  - `id`：年级ID
  - `name`：年级名称
  - `categories`：类别数组
    - `id`：类别ID
    - `name`：类别名称
    - `types`：题型数组
      - `id`：题型ID
      - `name`：题型名称
      - `max_num`：最大数字
      - `operation`：运算类型（+、-、mixed）

**注意事项**
- 所有ID必须唯一
- `operation`只能是"+"、"-"或"mixed"
- `max_num`决定题目中数字的最大值

## 使用说明

### 数学题练习

1. **选择年级**
   - 在"数学题"标签页中，选择年级
   - 系统会自动加载该年级的类别

2. **选择类别**
   - 在类别下拉框中选择题型类别
   - 例如：20以内加减法、100以内加减法

3. **选择题型**
   - 在题型下拉框中选择具体题型
   - 可选：加法、减法、混合运算

4. **设置题目数量**
   - 在输入框中输入题目数量（1-100）
   - 默认为10题

5. **生成题目**
   - 点击"生成题目"按钮
   - 系统会生成指定数量的题目

6. **在线练习**
   - 在每个题目的输入框中输入答案
   - 点击"检查答案"按钮
   - 系统会显示正确答案和正确率

7. **下载Word**
   - 点击"下载Word"按钮
   - 系统会生成Word文档并自动下载

### 古诗默写练习

1. **选择古诗**
   - 在"古诗默写"标签页中，勾选要练习的古诗
   - 可以勾选多首古诗

2. **设置题目数量**
   - 在输入框中输入题目数量
   - 默认为10题

3. **生成题目**
   - 点击"生成题目"按钮
   - 系统会随机生成上下句默写

4. **在线练习**
   - 在输入框中输入答案
   - 点击"检查答案"查看结果

5. **下载Word**
   - 点击"下载Word"按钮
   - 生成Word文档，便于打印

### 英语默写练习

1. **选择单元**
   - 在"英语默写"标签页中，选择单元
   - 系统会加载该单元的单词

2. **选择方向**
   - 选择"中译英"或"英译汉"
   - 中译英：显示中文，输入英文
   - 英译汉：显示英文，输入中文

3. **设置题目数量**
   - 输入要生成的题目数量
   - 默认为10题

4. **生成题目**
   - 点击"生成题目"按钮
   - 系统会随机打乱单词顺序

5. **在线练习**
   - 在输入框中输入答案
   - 点击"检查答案"查看结果

6. **下载Word**
   - 点击"下载Word"按钮
   - 生成Word文档

### 通用操作

**检查答案**
- 在练习界面输入答案后
- 点击"检查答案"按钮
- 系统会标记正确/错误的题目
- 显示正确答案和正确率

**重置练习**
- 点击"重置"按钮
- 清空当前练习
- 可以重新生成题目

**下载练习报告**
- 检查答案后，点击"下载练习报告"按钮
- 系统会生成详细的Word报告
- 包含所有题目和答案对比

## 练习报告功能

完成在线练习后，可以下载详细的Word格式练习报告，包含：

### 统计信息

- **总题数**：本次练习的题目总数
- **正确数**：答对的题目数量
- **错误数**：答错的题目数量
- **正确率**：百分比形式的正确率（保留一位小数）

### 每题详情

每道题包含以下信息：

- **题目内容**：显示完整的题目
- **你的答案**：用户输入的答案
- **正确答案**：标准答案（加粗显示）
- **结果标记**：
  - ✓ 正确（绿色）
  - ✗ 错误（红色）

### 报告格式

- **字体**：宋体
- **字号**：11号字
- **行间距**：1.5倍
- **页边距**：上下左右各0.5英寸
- **文件名**：练习报告_YYYYMMDD_HHMMSS.docx

### 使用场景

- 学生自我评估学习效果
- 家长了解孩子学习情况
- 老师掌握学生学习进度
- 保存学习记录，便于复习

## 技术栈

### 后端技术

- **Python 3.7+**：主要编程语言
- **Flask**：轻量级Web框架
- **python-docx**：Word文档生成库
- **JSON**：数据存储格式

### 前端技术

- **HTML5**：页面结构
- **CSS3**：样式设计
- **JavaScript (ES6+)**：交互逻辑
- **Fetch API**：与后端通信

### 开发工具

- **VS Code**：代码编辑器
- **Git**：版本控制
- **Chrome DevTools**：调试工具

## 常见问题

### Q1：启动服务器时提示端口被占用怎么办？

**A**：修改`app.py`文件中的端口号：

```python
if __name__ == '__main__':
    app.run(debug=True, port=3001)  # 改为其他端口
```

### Q2：如何添加新的古诗或单词？

**A**：编辑对应的数据文件：
- 古诗：编辑`data/poetry.json`
- 单词：编辑`data/english.json`

### Q3：Word文档打不开怎么办？

**A**：确保安装了Microsoft Word或WPS Office，如果仍无法打开，尝试：
1. 检查文件是否完整下载
2. 使用其他软件打开（如LibreOffice）
3. 重新生成Word文档

### Q4：练习报告中的分数显示不正常？

**A**：分数使用HTML格式显示，确保：
1. 浏览器支持HTML5
2. 使用最新版本的浏览器
3. 如果Word中显示异常，这是正常现象，HTML格式主要用于网页显示

### Q5：如何备份数据？

**A**：定期备份`data`目录：
```bash
# 创建备份
cp -r data data_backup_$(date +%Y%m%d)

# 或使用压缩
tar -czf data_backup_$(date +%Y%m%d).tar.gz data
```

### Q6：系统支持移动端吗？

**A**：支持！系统采用响应式设计，可以在手机、平板等移动设备上正常使用。

### Q7：如何修改界面样式？

**A**：编辑`static/css/style.css`文件，可以自定义：
- 颜色主题
- 字体大小
- 布局方式
- 动画效果

### Q8：生成的题目会重复吗？

**A**：不会。系统使用随机算法生成题目，确保每次练习的题目都不重复。

## 更新日志

### v1.2.0 (2026-01-15)

**新增功能**
- 添加练习报告功能，支持下载详细报告
- 支持分数显示（HTML格式）
- 添加作者署名信息

**优化改进**
- 优化Word导出格式
- 改进用户界面体验
- 提升系统稳定性

**Bug修复**
- 修复分数显示问题
- 修复Word文档格式错误

### v1.1.0 (2026-01-10)

**新增功能**
- 添加英语默写功能
- 支持中译英和英译汉
- 添加单元选择功能

**优化改进**
- 优化古诗默写逻辑
- 改进题目随机算法

### v1.0.0 (2026-01-01)

**初始版本**
- 实现数学题功能
- 实现古诗默写功能
- 支持在线练习
- 支持Word导出

## 作者信息

**Edited By Song Zichen, Quan Hai Middle School**

本项目专为初中生学习设计，支持数学、古诗、英语等多种题型的在线练习和导出功能。系统界面美观，操作简单，是学生日常练习和老师出题的理想工具。

### 联系方式

如有问题或建议，欢迎联系：
- 学校：全海中学
- 作者：宋子晨

### 许可证

本项目仅供学习和教学使用。

---

**感谢使用在线出题系统！祝学习进步！**